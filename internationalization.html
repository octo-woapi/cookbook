<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Internationalize your API | The REST API cookbook</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="How to design API resources that depends on the requested language or country">
    
    <link rel="preload" href="/cookbook/assets/css/0.styles.ea175fe0.css" as="style"><link rel="preload" href="/cookbook/assets/js/app.738cf74b.js" as="script"><link rel="preload" href="/cookbook/assets/js/3.bf83ed3c.js" as="script"><link rel="preload" href="/cookbook/assets/js/1.1b3058d5.js" as="script"><link rel="preload" href="/cookbook/assets/js/13.ef43348a.js" as="script"><link rel="prefetch" href="/cookbook/assets/js/10.16cb6e97.js"><link rel="prefetch" href="/cookbook/assets/js/11.16e71522.js"><link rel="prefetch" href="/cookbook/assets/js/12.64161caa.js"><link rel="prefetch" href="/cookbook/assets/js/14.a3d6dee4.js"><link rel="prefetch" href="/cookbook/assets/js/4.27048cad.js"><link rel="prefetch" href="/cookbook/assets/js/5.c606388b.js"><link rel="prefetch" href="/cookbook/assets/js/6.ef3ec20d.js"><link rel="prefetch" href="/cookbook/assets/js/7.c02e2645.js"><link rel="prefetch" href="/cookbook/assets/js/8.ad36a568.js"><link rel="prefetch" href="/cookbook/assets/js/9.c760fc48.js">
    <link rel="stylesheet" href="/cookbook/assets/css/0.styles.ea175fe0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cookbook/" class="home-link router-link-active"><!----> <span class="site-name">The REST API cookbook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="internationalize-your-api"><a href="#internationalize-your-api" class="header-anchor">#</a> Internationalize your API</h1> <h2 id="use-case"><a href="#use-case" class="header-anchor">#</a> Use-case</h2> <p>My e-commerce API exposes products.<br>
I want the content to change depending on the language or the country of the end-user:</p> <ul><li>labels and units should be retrieved in the language of the user</li> <li>the user should only see the products available in his country, with the price of the product in his country</li></ul> <p>There are actually two distinct use-cases behind this one:</p> <ul><li>labels and units are about <strong>translation</strong>: it only changes the text that will be displayed to the user, it does not impact the business rules<br>
eg: the list of products will be the same, but with labels in English, French, etc.</li> <li>selling products adapted to a specific country is called <strong>localization</strong>: the country changes the <strong>business rules</strong> of the API, not only the labels.<br>
eg: the product #42 is available only in France but not in the US ; the product #43 is worth 10€ in France but $20 in the US, etc.</li></ul> <p>A different recipe will be applied to each use-case.</p> <h2 id="recipe-for-use-case-1-translation"><a href="#recipe-for-use-case-1-translation" class="header-anchor">#</a> Recipe for use case 1 : translation</h2> <p>When building a REST API, we should rely on HTTP built-in functionalities (instead of inventing custom ones), so that any developer will be able to understand how the API works without even reading a documentation.</p> <p>Changing the <em>representation</em> of a given resource depending on the format requested by the API Client is a core principle of the HTTP protocol: it is called <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation" target="_blank" rel="noopener noreferrer">content negotiation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>For getting the representation of the resource in a specific language, we should use the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language" target="_blank" rel="noopener noreferrer">Accept-Language header<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Your API will have to deal with this Accept-Language header:</p> <ul><li>return the labels in the requested language</li> <li>use a default language if the header is not present (it should not be mandatory)</li> <li>maybe implement a fallback mechanism if there is no translation for the requested language</li></ul> <p>Getting the product #42 in the default locale (English):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> https://api.example.com/v1/products/42
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A great product!&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Getting the product #42 in French:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> <span class="token punctuation">\</span>
-H <span class="token string">&quot;Accept-Language: fr-FR&quot;</span> <span class="token punctuation">\</span>
https://api.example.com/v1/products/42
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Un super produit !&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="recipe-for-use-case-2-localization-business-rules-depending-on-the-country"><a href="#recipe-for-use-case-2-localization-business-rules-depending-on-the-country" class="header-anchor">#</a> Recipe for use case 2 : localization (business rules depending on the country)</h2> <p>When the country of the user does not only imply translation, but also changes the behaviour of your application, <strong>it should be requested as an explicit parameter.</strong></p> <p>Your business parameters should always be explicit in your API contract. A Client developer should be able to understand what are the business parameters of an endpoint, and how they will impact the behaviour of the API.</p> <p>As headers are meant for metadata (like content negotiation), the business parameters should not be &quot;hidden&quot; in a header.<br>
On the contrary, they should be declared as <strong>query string or path parameters</strong>, depending on the context and your API standards.</p> <p>Unlike the Accept-Language header, this parameter will probably be mandatory.</p> <h3 id="in-a-query-string-parameter"><a href="#in-a-query-string-parameter" class="header-anchor">#</a> In a query string parameter</h3> <p>Products #42 and #43 are sold in France with a price in Euros:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> https://api.example.com/v1/products?country<span class="token operator">=</span>FR
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A great product!&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;43&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The product #43&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>Only product #43 is sold in the US, with a price in US Dollars:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> https://api.example.com/v1/products?country<span class="token operator">=</span>US
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;43&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The product #43&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;USD&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="in-a-path-parameter"><a href="#in-a-path-parameter" class="header-anchor">#</a> In a path parameter</h3> <p>Same principle, but the country is in a path parameter, emphasizing the hierarchy between products and the countries they belong to:</p> <p><code>GET /v1/countries/:countryId/products</code> =&gt; list of the products of countryId</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> https://api.example.com/v1/countries/FR/products
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A great product!&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;43&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The product #43&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="format-of-the-parameter"><a href="#format-of-the-parameter" class="header-anchor">#</a> Format of the parameter</h3> <p>As this is a custom parameter, you can chose its name and possible values, according to what it stands for.</p> <p>If your parameter is a country, rather use a normalized value like <a href="https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes#Current_ISO_3166_country_codes" target="_blank" rel="noopener noreferrer">the country ISO code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (like the second part of the Accept-Language format: <code>fr-FR</code> =&gt; <code>FR</code> for France).</p> <p>But depending on your business needs it may also refer to a custom code, for example the id of a business unit.<br>
In this case, the values may be listed by a specific endpoint like <code>GET /business-units</code>:</p> <p>Get all available business units:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> https://api.example.com/v1/business-units
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BU_EUR&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Europe Business Unit&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BU_US&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;US Business Unit&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>Get the products of the Europe business unit:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> https://api.example.com/v1/products?business-unit<span class="token operator">=</span>BU_EUR
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A great product!&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="why-not-both"><a href="#why-not-both" class="header-anchor">#</a> Why not both?</h2> <p>You just separated the two concerns (translation and localization), so you can easily mix both solutions, if it makes sense for your business:</p> <p>Products sold in the US, with French labels:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> <span class="token punctuation">\</span>
-H <span class="token string">&quot;Accept-Language: fr-FR&quot;</span> <span class="token punctuation">\</span>
https://api.example.com/v1/products?country<span class="token operator">=</span>FR
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;43&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Le produit #43 en Français !&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;USD&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="dont-s"><a href="#dont-s" class="header-anchor">#</a> Dont's</h2> <p>Before choosing a solution, you need to identify if your need belongs to the first or the second use case.<br>
If the parameter changes more than just labels, you probably need to manage localization like in the second use case.</p> <p><strong>Don't use Accept-Language to manage both translation and business rules.</strong><br>
eg: <code>Accept-Language: fr-FR</code> returns the products sold in France, translated in French.</p> <p>This may do the trick for a while, but you just coupled language and business rules. What if you need to expose products sold in China but translated in English? Use a custom <code>en-CN</code> language tag?
This behaviour will be difficult to understand for your API client.</p> <p><strong>Don't use Accept-Language to display the currency</strong>
Currency is related to the user country, and it is tempting to display prices in Euros when requested with the <code>fr-FR</code> language, and in US Dollars when requested with the <code>en-US</code> language.<br>
Once again, by coupling translation with a business parameter you made some queries impossible: how do I display products sold in France in Euros but with the English labels?</p> <p>If your products may be displayed in different currencies, it is a better idea to accept a query parameter like <code>?currency=EUR</code>, or make the currency depends on a business parameter like: <code>?country=FR</code> =&gt; prices in Euro.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/cookbook/assets/js/app.738cf74b.js" defer></script><script src="/cookbook/assets/js/3.bf83ed3c.js" defer></script><script src="/cookbook/assets/js/1.1b3058d5.js" defer></script><script src="/cookbook/assets/js/13.ef43348a.js" defer></script>
  </body>
</html>
