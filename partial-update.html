<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Partial update of a resource | The REST API cookbook</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="How to update only a few fields of a resource?">
    
    <link rel="preload" href="/cookbook/assets/css/0.styles.61efb392.css" as="style"><link rel="preload" href="/cookbook/assets/js/app.5d9b20b0.js" as="script"><link rel="preload" href="/cookbook/assets/js/3.9f6d8892.js" as="script"><link rel="preload" href="/cookbook/assets/js/1.58ef23db.js" as="script"><link rel="preload" href="/cookbook/assets/js/18.77c20564.js" as="script"><link rel="prefetch" href="/cookbook/assets/js/10.23a6cb12.js"><link rel="prefetch" href="/cookbook/assets/js/11.1481d2a5.js"><link rel="prefetch" href="/cookbook/assets/js/12.c4643e96.js"><link rel="prefetch" href="/cookbook/assets/js/13.6214a33d.js"><link rel="prefetch" href="/cookbook/assets/js/14.e05cf048.js"><link rel="prefetch" href="/cookbook/assets/js/15.cdea9715.js"><link rel="prefetch" href="/cookbook/assets/js/16.41ded39e.js"><link rel="prefetch" href="/cookbook/assets/js/17.1353a737.js"><link rel="prefetch" href="/cookbook/assets/js/19.5c1cd03f.js"><link rel="prefetch" href="/cookbook/assets/js/20.ccc3cfb7.js"><link rel="prefetch" href="/cookbook/assets/js/21.b855852d.js"><link rel="prefetch" href="/cookbook/assets/js/4.f8125ee1.js"><link rel="prefetch" href="/cookbook/assets/js/5.fc8a619d.js"><link rel="prefetch" href="/cookbook/assets/js/6.b29b864a.js"><link rel="prefetch" href="/cookbook/assets/js/7.6dafa1e9.js"><link rel="prefetch" href="/cookbook/assets/js/8.1b37a035.js"><link rel="prefetch" href="/cookbook/assets/js/9.2139fb15.js">
    <link rel="stylesheet" href="/cookbook/assets/css/0.styles.61efb392.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cookbook/" class="home-link router-link-active"><!----> <span class="site-name">The REST API cookbook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="partial-update-of-a-resource"><a href="#partial-update-of-a-resource" class="header-anchor">#</a> Partial update of a resource</h1> <h2 id="use-case"><a href="#use-case" class="header-anchor">#</a> Use-case</h2> <p>My API has a <code>/users</code> resource, representing a User, and containing its personal information: name, email, address...</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tom.smith@example.com&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;home&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0123456789&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mobile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9876543210&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50, avenue des Champs-Elysées&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;zip_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;75008&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PARIS&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The user modifies his profile to update only his address.</p> <p>I could perform a complete update, and send the whole resource back with a <code>PUT</code> request. But the payload may be huge, with a lot of useless fields since I just want to update the address.</p> <p>How can I perform a partial update, sending only the new address?</p> <h2 id="recipe"><a href="#recipe" class="header-anchor">#</a> Recipe</h2> <p>Partial update can be performed with a <code>PUT</code> request on a sub-resource. It is indeed a complete update, but of a fraction of the initial resource.</p> <p>This sub-resource should be meaningful on a business level.</p> <p>In our example, it would be <code>users/:id/address</code>.<br>
Note that this sub-resource can be in the singular, since it is a single resource and not a collection.</p> <div class="language- extra-class"><pre class="language-text"><code>PUT https://api.example.com/v1/users/42/address HTTP/1.1
{
    &quot;street&quot;: &quot;34, avenue de l'Opéra&quot;,
    &quot;zip_code&quot;: &quot;75002&quot;,
    &quot;city&quot;: &quot;PARIS&quot;
}

&lt; 200 OK
</code></pre></div><p>This design also works for updating just one field:</p> <div class="language- extra-class"><pre class="language-text"><code>PUT https://api.example.com/v1/users/42/email HTTP/1.1
&quot;my_new_email@example.com&quot;

&lt; 200 OK
</code></pre></div><p><strong>Benefits:</strong></p> <ul><li>your API <strong>expresses exactly what you can update</strong> on a business point of view:<br>
Updating the address or the email may be performed on different moments of the User lifecycle, with specific business rules. Some other fields of the User may not be open to modification. Having different endpoints for each of these business operations clearly indicates that they are separate, and does not let the API Client decide what field he wants to update or not.</li> <li>you avoid the drawbacks of <code>PATCH</code> (see below)</li></ul> <p><strong>Drawbacks:</strong></p> <ul><li>this is not suited if you need flexibility on the fields you want to update</li> <li>obviously, you end up with more endpoints on your API (but is that really a problem?)</li></ul> <h3 id="why-not-patch"><a href="#why-not-patch" class="header-anchor">#</a> Why not PATCH?</h3> <p>In the REST standard, <code>PATCH</code> is usually described as the HTTP verb to use in case of a partial update.</p> <p>Nevertheless, we discourage from using <code>PATCH</code>:<br>
the format of the payload indicating the changes to apply on the resource is not specified in <a href="https://datatracker.ietf.org/doc/html/rfc5789" target="_blank" rel="noopener noreferrer">the HTTP RFC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
It means that the Client will have to read your documentation to understand how the payload should be formatted to update only the address.</p> <p>To compensate this grey area, several standards have been proposed, such as:</p> <ul><li><a href="https://datatracker.ietf.org/doc/html/rfc6902" target="_blank" rel="noopener noreferrer">JSON Patch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/digibib/ls.ext/wiki/JSON-LD-PATCH" target="_blank" rel="noopener noreferrer">JSON-LD<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://datatracker.ietf.org/doc/html/rfc7396" target="_blank" rel="noopener noreferrer">JSON Merge Patch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>But none of them are integrated in the HTTP spec: you will have to chose one and let the Client know how to format the request.</p> <p><code>PATCH</code> can also leads to tricky business cases, that will not be obvious when looking at your API: is a missing field a suppression? what if some fields have to be updated altogether?</p> <p>On the other hand, <code>PUT</code> has many advantages:</p> <ul><li>its format is standard and predictable, since you have to send the complete resource</li> <li>unlike <code>PATCH</code>, it is safe and idempotent</li></ul> <p><strong>Then, should I never use <code>PATCH</code>?</strong><br>
If you want a complete flexibility on the fields that will be updated, but you don't want to perform a complete update with <code>PUT</code> because the payload will be too big, <code>PATCH</code> is the only way to go.<br>
But in this case, it may reveal that the resource is too big, or that its business meaning is unclear, and we encourage you to reconsider its granularity.</p> <h2 id="resources"><a href="#resources" class="header-anchor">#</a> Resources</h2> <ul><li><a href="https://blog.octo.com/should-i-put-or-should-i-patch/" target="_blank" rel="noopener noreferrer">Should I PUT or should I PATCH?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/cookbook/assets/js/app.5d9b20b0.js" defer></script><script src="/cookbook/assets/js/3.9f6d8892.js" defer></script><script src="/cookbook/assets/js/1.58ef23db.js" defer></script><script src="/cookbook/assets/js/18.77c20564.js" defer></script>
  </body>
</html>
